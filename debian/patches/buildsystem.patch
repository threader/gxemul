Make upstream's new build system fit the Debian way
a little better, as well as correct a couple of
errors.


--- gxemul-0.6.0.orig/Makefile.skel
+++ gxemul-0.6.0/Makefile.skel
@@ -31,18 +31,18 @@
 
 install: documentation test
 	@echo Installing binaries, man page, and documentation...
-	mkdir -p $(PREFIX)/bin
-	cp -f $(BIN) $(PREFIX)/bin/
-	mkdir -p $(PREFIX)/man/man1
-	cp -f man/gxemul.1 $(PREFIX)/man/man1/
-	mkdir -p $(PREFIX)/share/doc/gxemul
-	cp -R doc/* $(PREFIX)/share/doc/gxemul/
+	mkdir -p $(INSTALLROOT)/bin
+	cp -f $(BIN) $(INSTALLROOT)/bin/
+	mkdir -p $(INSTALLROOT)/share/man/man1
+	cp -f man/gxemul.1 $(INSTALLROOT)/share/man/man1/
+	mkdir -p $(INSTALLROOT)/share/doc/gxemul
+	cp -R doc/* $(INSTALLROOT)/share/doc/gxemul/
 
 uninstall:
 	@echo Removing binaries, man pages, and documentation...
-	rm -f $(PREFIX)/bin/gxemul
-	rm -f $(PREFIX)/man/man1/gxemul.1
-	rm -rf $(PREFIX)/share/doc/gxemul
+	rm -f $(INSTALLROOT)/bin/gxemul
+	rm -f $(INSTALLROOT)/share/man/man1/gxemul.1
+	rm -rf $(INSTALLROOT)/share/doc/gxemul
 
 clean:
 	rm -f $(BIN) *core core.* *.gmon _* *.exe ktrace.out tmp_*.out*
@@ -66,4 +66,7 @@
 	rm -f src/promemul/Makefile src/include/Makefile
 	rm -f src/useremul/Makefile src/include/Makefile
 	rm -f src/console/Makefile src/symbol/Makefile
+	rm -f src/plugins/Makefile src/plugins/file/Makefile
+
+distclean: clean_all
 
--- gxemul-0.6.0.orig/configure
+++ gxemul-0.6.0/configure
@@ -1033,6 +1033,7 @@
 echo "DOXYGEN=$DOXYGEN" >> _Makefile.header
 echo "VALGRIND=$VALGRIND" >> _Makefile.header
 echo "PREFIX=$PREFIX" >> _Makefile.header
+echo "INSTALLROOT=\$(DESTDIR)$PREFIX" >> _Makefile.header
 echo "" >> _Makefile.header
 
 #  Create list of unit testable classes:
